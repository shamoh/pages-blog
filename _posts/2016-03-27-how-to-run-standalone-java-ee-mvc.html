---
layout: post
title: How to run standalone Java EE MVC application
date: '2016-03-27T01:01:00.000+01:00'
author: Libor Kramoli≈°
tags:
- undertow
- jaxrs
- mvc
- cdi
- javaee
- jersey
- mustache
- servlet
- ozark
- deltaspike
- weld
modified_time: '2016-03-27T01:01:08.001+01:00'
blogger_id: tag:blogger.com,1999:blog-2759548145050416517.post-8237997373307519771
blogger_orig_url: http://yatel.kramolis.cz/2016/03/how-to-run-standalone-java-ee-mvc.html
---

<div id="markdown-preview">This project demonstrates how to create <strong>standalone Java EE MVC          application</strong>.       <br /><br /><a href="https://mvc-spec.java.net/">MVC</a> is newly developed Java          EE <a href="https://jcp.org/en/jsr/detail?id=371">JSR 371:          Model-View-Controller (MVC 1.0) Specification</a>.       <br /><blockquote>The MVC API defines an action-oriented Web framework as an            alternative to the component-oriented JSF. In an action-oriented            framework, developers are responsible for all the controller logic            and are given full control of the URI space for their application.&nbsp;</blockquote><blockquote>The MVC API is layered on top of <a href="https://jax-rs-spec.java.net/">JAX-RS</a>            over <a href="https://jcp.org/en/jsr/detail?id=315">Servlets</a> and            integrates with existing EE technologies like <a href="https://www.jcp.org/en/jsr/detail?id=365">CDI</a>            and <a href="https://jcp.org/en/jsr/detail?id=349">Bean Validation</a>.         </blockquote>MVC spec is going to be part of next&nbsp;<b>Java EE</b>&nbsp;<b>8</b>. MVC reference implementation named <a href="https://ozark.java.net/"><b>Ozark</b></a> is hosted on java.net. MVC depends on Servlets, JAX-RS and CDI. I've chosen to use&nbsp;<a href="http://undertow.io/"><b>Undertow</b></a>,&nbsp;<a href="https://jersey.java.net/"><b>Jersey</b></a>&nbsp;and&nbsp;<a href="http://weld.cdi-spec.org/"><b>Weld</b></a>. And&nbsp;<a href="https://deltaspike.apache.org/"><b>DeltaSpike</b></a>&nbsp;as CDI extension library. Finally,&nbsp;<a href="https://gradle.org/">Gradle</a>&nbsp;to build and run the project.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #272822; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">ext</span> <span style="color: #f92672;">{</span><br /><span style="line-height: 125%;">    </span><span style="color: #f8f8f2; line-height: 125%;">undertowVersion</span><span style="line-height: 125%;"> </span><span style="color: #f92672; line-height: 125%;">=</span><span style="line-height: 125%;"> </span><span style="color: #e6db74; line-height: 125%;">'1.3.18.Final'</span></pre><pre style="line-height: 125%; margin: 0;">    <span style="color: #f8f8f2;">weldVersion</span> <span style="color: #f92672;">=</span> <span style="color: #e6db74;">'2.3.3.Final'</span><br />    <span style="color: #f8f8f2;">deltaspikeVersion</span> <span style="color: #f92672;">=</span> <span style="color: #e6db74;">'1.5.4'</span><br />    <span style="color: #f8f8f2;">jerseyVersion</span> <span style="color: #f92672;">=</span> <span style="color: #e6db74;">'2.22.2'</span><br />    <span style="color: #f8f8f2;">ozarkVersion</span> <span style="color: #f92672;">=</span> <span style="color: #e6db74;">'1.0.0-m02'</span><br /><span style="color: #f92672;">}</span><br /><span style="color: #f8f8f2;">task</span> <span style="color: #a6e22e;">wrapper</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">type:</span> <span style="color: #f8f8f2;">Wrapper</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />    <span style="color: #f8f8f2;">gradleVersion</span> <span style="color: #f92672;">=</span> <span style="color: #e6db74;">'2.12'</span><br /><span style="color: #f92672;">}</span><br /></pre></div><br /><h3>Standalone CDI container</h3><b>Weld</b> contains module to <b>support Java SE</b> applications. Together with <b>Apache DeltaSpike Java SE &amp; Weld module</b>:<br /><br /><div style="background: #272822; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">dependencies</span> <span style="color: #f92672;">{</span><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"org.jboss.weld.se:weld-se:$weldVersion"</span><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"org.apache.deltaspike.cdictrl:deltaspike-cdictrl-weld:$deltaspikeVersion"</span><br /></pre></div><br />it is easy to bootstrap and shutdown CDI container:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #272822; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 16.25px;"><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.enterprise.context.ApplicationScoped</span><span style="color: #f92672;">;</span><br /></pre><pre style="line-height: 125%; margin: 0;"><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">org.apache.deltaspike.cdise.api.CdiContainer</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">org.apache.deltaspike.cdise.api.CdiContainerLoader</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">org.jboss.weld.servlet.WeldInitialListener</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">org.jboss.weld.servlet.WeldTerminalListener</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">class</span> <span style="color: #a6e22e;">Main</span> <span style="color: #f92672;">{</span><br /><br />    <span style="color: #66d9ef;">static</span> <span style="color: #f8f8f2;">CdiContainer</span> <span style="color: #a6e22e;">init</span><span style="color: #f92672;">()</span> <span style="color: #66d9ef;">throws</span> <span style="color: #f8f8f2;">ServletException</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">NoSuchMethodException</span> <span style="color: #f92672;">{</span><br />        <span style="color: #f8f8f2;">CdiContainer</span> <span style="color: #f8f8f2;">cdiContainer</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">CdiContainerLoader</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">getCdiContainer</span><span style="color: #f92672;">();</span><br /><br />        <span style="color: #f8f8f2;">cdiContainer</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">boot</span><span style="color: #f92672;">();</span><br />        <span style="color: #f8f8f2;">cdiContainer</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">getContextControl</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">startContext</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">ApplicationScoped</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">class</span><span style="color: #f92672;">);</span><br /><br />        <span style="color: #f8f8f2;">initServlet</span><span style="color: #f92672;">();</span><br /><br />        <span style="color: #66d9ef;">return</span> <span style="color: #f8f8f2;">cdiContainer</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #66d9ef;">static</span> <span style="color: #66d9ef;">void</span> <span style="color: #a6e22e;">destroy</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">CdiContainer</span> <span style="color: #f8f8f2;">cdiContainer</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #f8f8f2;">cdiContainer</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">getContextControl</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">stopContext</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">ApplicationScoped</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">class</span><span style="color: #f92672;">);</span><br />        <span style="color: #f8f8f2;">cdiContainer</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">shutdown</span><span style="color: #f92672;">();</span><br />    <span style="color: #f92672;">}</span><br /><br /><span style="color: #f92672;">...</span><br /></pre></div><br />You can see we also start and stop CDI <a href="https://docs.oracle.com/javaee/6/api/javax/enterprise/context/ApplicationScoped.html">ApplicationScoped</a> scope.<br /><h3>Initialize Servlet</h3>Next we need to register <b>Jersey <a href="https://jersey.java.net/nonav/apidocs/latest/jersey/org/glassfish/jersey/servlet/ServletContainer.html">ServletContainer</a></b> as <b>Undertow</b> servlet:<br /><br /><div style="background: #272822; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">dependencies</span> <span style="color: #f92672;">{</span><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"io.undertow:undertow-core:$undertowVersion"</span><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"io.undertow:undertow-servlet:$undertowVersion"</span><br /><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"org.glassfish.jersey.core:jersey-server:$jerseyVersion"</span><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"org.glassfish.jersey.containers:jersey-container-servlet-core:$jerseyVersion"</span><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"org.glassfish.jersey.ext.cdi:jersey-cdi1x-servlet:$jerseyVersion"</span><br /></pre></div><!-- HTML generated using hilite.me --><br /><div style="background: #272822; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.servlet.Servlet</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.servlet.ServletException</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">io.undertow.Undertow</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">io.undertow.servlet.Servlets</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">io.undertow.servlet.api.DeploymentInfo</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">io.undertow.servlet.api.DeploymentManager</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">io.undertow.servlet.api.ServletContainer</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">io.undertow.servlet.api.ServletInfo</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">org.jboss.weld.servlet.WeldInitialListener</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">org.jboss.weld.servlet.WeldTerminalListener</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">class</span> <span style="color: #a6e22e;">Main</span> <span style="color: #f92672;">{</span><br /><br />    <span style="color: #f92672;">...</span><br /><br />    <span style="color: #66d9ef;">private</span> <span style="color: #66d9ef;">static</span> <span style="color: #66d9ef;">void</span> <span style="color: #a6e22e;">initServlet</span><span style="color: #f92672;">()</span> <span style="color: #66d9ef;">throws</span> <span style="color: #f8f8f2;">ServletException</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">NoSuchMethodException</span> <span style="color: #f92672;">{</span><br />        <span style="color: #f8f8f2;">DeploymentInfo</span> <span style="color: #f8f8f2;">deploymentInfo</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">DeploymentInfo</span><span style="color: #f92672;">()</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">addListener</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Servlets</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">listener</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">WeldInitialListener</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">class</span><span style="color: #f92672;">))</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">addListener</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Servlets</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">listener</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">WeldTerminalListener</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">class</span><span style="color: #f92672;">))</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">setContextPath</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"/"</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">setDeploymentName</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"standalone-javax-mvc-app"</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">addServlets</span><span style="color: #f92672;">(</span><br />                        <span style="color: #f8f8f2;">createServletInfo</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"/resources/*"</span><span style="color: #f92672;">,</span> <span style="color: #e6db74;">"JAX-RS Resources"</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">org</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">glassfish</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">jersey</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">servlet</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">ServletContainer</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">class</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">setClassIntrospecter</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">CdiClassIntrospecter</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">INSTANCE</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">setAllowNonStandardWrappers</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">true</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">setClassLoader</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">ClassLoader</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">getSystemClassLoader</span><span style="color: #f92672;">());</span><br /><br />        <span style="color: #f8f8f2;">ServletContainer</span> <span style="color: #f8f8f2;">servletContainer</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">Servlets</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">defaultContainer</span><span style="color: #f92672;">();</span><br />        <span style="color: #f8f8f2;">DeploymentManager</span> <span style="color: #f8f8f2;">deploymentManager</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">servletContainer</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">addDeployment</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">deploymentInfo</span><span style="color: #f92672;">);</span><br />        <span style="color: #f8f8f2;">deploymentManager</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">deploy</span><span style="color: #f92672;">();</span><br /><br />        <span style="color: #f8f8f2;">Undertow</span> <span style="color: #f8f8f2;">server</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">Undertow</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">builder</span><span style="color: #f92672;">()</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">addHttpListener</span><span style="color: #f92672;">(</span><span style="color: #ae81ff;">8080</span><span style="color: #f92672;">,</span> <span style="color: #e6db74;">"0.0.0.0"</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">setHandler</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">deploymentManager</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">start</span><span style="color: #f92672;">())</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">build</span><span style="color: #f92672;">();</span><br />        <span style="color: #f8f8f2;">server</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">start</span><span style="color: #f92672;">();</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #66d9ef;">private</span> <span style="color: #66d9ef;">static</span> <span style="color: #f8f8f2;">ServletInfo</span> <span style="color: #a6e22e;">createServletInfo</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">String</span> <span style="color: #f8f8f2;">mapping</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">String</span> <span style="color: #f8f8f2;">servletName</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?</span> <span style="color: #66d9ef;">extends</span> <span style="color: #f8f8f2;">Servlet</span><span style="color: #f92672;">&gt;</span> <span style="color: #f8f8f2;">servlet</span><span style="color: #f92672;">)</span><br />            <span style="color: #66d9ef;">throws</span> <span style="color: #f8f8f2;">NoSuchMethodException</span> <span style="color: #f92672;">{</span><br />        <span style="color: #f8f8f2;">ServletInfo</span> <span style="color: #f8f8f2;">servletInfo</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">Servlets</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">servlet</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">servletName</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">servlet</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">setAsyncSupported</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">true</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">setLoadOnStartup</span><span style="color: #f92672;">(</span><span style="color: #ae81ff;">1</span><span style="color: #f92672;">)</span><br />                <span style="color: #f92672;">.</span><span style="color: #a6e22e;">addMapping</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">mapping</span><span style="color: #f92672;">);</span><br />        <span style="color: #f8f8f2;">servletInfo</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">setInstanceFactory</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">CdiClassIntrospecter</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">INSTANCE</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">createInstanceFactory</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">servlet</span><span style="color: #f92672;">));</span><br /><br />        <span style="color: #66d9ef;">return</span> <span style="color: #f8f8f2;">servletInfo</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><span style="color: #f92672;">}</span><br /></pre></div><br />Important part is registering of Weld Servlet listeners: <b>WeldInitialListener</b> and <b>WeldTerminalListener</b>.<br /><br />The instance of Jersey <b>ServletContainer</b> is provided as ApplicationScoped bean by custom <b>CdiProducer</b>&nbsp;using <b>CdiClassIntrospecter</b>.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #272822; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.enterprise.inject.Produces</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">org.glassfish.jersey.server.ResourceConfig</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">org.glassfish.jersey.servlet.ServletContainer</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #a6e22e;">@ApplicationScoped</span><br /><span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">class</span> <span style="color: #a6e22e;">CdiProducer</span> <span style="color: #f92672;">{</span><br /><br />    <span style="color: #66d9ef;">private</span> <span style="color: #66d9ef;">long</span> <span style="color: #f8f8f2;">helloCounter</span><span style="color: #f92672;">;</span><br /><br />    <span style="color: #a6e22e;">@Produces</span><br />    <span style="color: #a6e22e;">@ApplicationScoped</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">ServletContainer</span> <span style="color: #a6e22e;">createServletContainer</span><span style="color: #f92672;">()</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">ResourceConfig</span> <span style="color: #f8f8f2;">resourceConfig</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">ResourceConfig</span><span style="color: #f92672;">();</span><br />        <span style="color: #f8f8f2;">resourceConfig</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">register</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">HelloController</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">class</span><span style="color: #f92672;">);</span><br />        <span style="color: #f8f8f2;">resourceConfig</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">property</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"javax.mvc.engine.ViewEngine.viewFolder"</span><span style="color: #f92672;">,</span> <span style="color: #e6db74;">"WEB-INF/views/"</span><span style="color: #f92672;">);</span><br /><br />        <span style="color: #66d9ef;">return</span> <span style="color: #66d9ef;">new</span> <span style="color: #a6e22e;">ServletContainer</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">resourceConfig</span><span style="color: #f92672;">);</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #f92672;">...</span><br /></pre></div><br />You can see we need to customize <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">"javax.mvc.engine.ViewEngine.viewFolder"</span> property to support standalone application class-path behaviour.<br /><br /><b>CdiClassIntrospecter</b> implements Undertow <a href="http://undertow.io/javadoc/1.3.x/io/undertow/servlet/api/class-use/ClassIntrospecter.html">ClassIntrospecter</a> interface and just delegates to CDI.<br /><br /><h3>MVC</h3>Now you can provide MVC&nbsp;@<a href="https://ozark.java.net/javax.mvc-api-1.0-edr1-javadoc/javax/mvc/Controller.html">Controller</a> methods:<br /><br /><div style="background: #272822; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">dependencies</span> <span style="color: #f92672;">{</span><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"org.glassfish.ozark:ozark:$ozarkVersion"</span><br />    <span style="color: #f8f8f2;">compile</span> <span style="color: #e6db74;">"org.glassfish.ozark.ext:ozark-mustache:$ozarkVersion"</span><br /></pre></div><br /><div style="background: #272822; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.enterprise.context.ApplicationScoped</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.inject.Inject</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.mvc.Models</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.mvc.annotation.Controller</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.mvc.annotation.View</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.DefaultValue</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.GET</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.Path</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.Produces</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.QueryParam</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #a6e22e;">@Path</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"hello"</span><span style="color: #f92672;">)</span><br /><span style="color: #a6e22e;">@ApplicationScoped</span><br /><span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">class</span> <span style="color: #a6e22e;">HelloController</span> <span style="color: #f92672;">{</span><br /><br />    <span style="color: #a6e22e;">@Inject</span><br />    <span style="color: #66d9ef;">private</span> <span style="color: #f8f8f2;">Models</span> <span style="color: #f8f8f2;">models</span><span style="color: #f92672;">;</span><br /><br />    <span style="color: #a6e22e;">@GET</span><br />    <span style="color: #a6e22e;">@Controller</span><br />    <span style="color: #a6e22e;">@Produces</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"text/html"</span><span style="color: #f92672;">)</span><br />    <span style="color: #a6e22e;">@View</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"hello.mustache"</span><span style="color: #f92672;">)</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">void</span> <span style="color: #a6e22e;">hello</span><span style="color: #f92672;">(</span><span style="color: #a6e22e;">@QueryParam</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"user"</span><span style="color: #f92672;">)</span> <span style="color: #a6e22e;">@DefaultValue</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"World"</span><span style="color: #f92672;">)</span> <span style="color: #f8f8f2;">String</span> <span style="color: #f8f8f2;">user</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #f8f8f2;">models</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">put</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"user"</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">user</span><span style="color: #f92672;">);</span><br />    <span style="color: #f92672;">}</span><br /><br /><span style="color: #f92672;">}</span><br /></pre></div><br />You can see I've chosen to use Mustache template engine, see&nbsp;<b>hello.mustache</b>:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #f8f8f8; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">&lt;html&gt;</span><br />    <span style="color: green; font-weight: bold;">&lt;head&gt;</span><br />        <span style="color: green; font-weight: bold;">&lt;title&gt;</span>Hello<span style="color: green; font-weight: bold;">&lt;/title&gt;</span><br />    <span style="color: green; font-weight: bold;">&lt;/head&gt;</span><br />    <span style="color: green; font-weight: bold;">&lt;body&gt;</span><br />        <span style="color: green; font-weight: bold;">&lt;h1&gt;</span>Hello {{ "{{" }}user}}!<span style="color: green; font-weight: bold;">&lt;/h1&gt;</span><br />    <span style="color: green; font-weight: bold;">&lt;/body&gt;</span><br /><span style="color: green; font-weight: bold;">&lt;/html&gt;</span><br /></pre></div><br /><h3>Sources</h3>Complete project sources are available on GitHub,&nbsp;<a href="https://github.com/shamoh/standalone-javax-mvc">https://github.com/<b>shamoh/standalone-javax-mvc</b></a>.<br /><div><br />The easiest way how to run the project is:<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #f8f8f8; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;">gradlew run<br /></pre></div><br />The application is then available on: <span style="font-family: Arial, Helvetica, sans-serif;"><a href="http://localhost:8080/resources/hello">http://localhost:8080/resources/hello</a>?user=Libor</span>.<br /><br /><br /></div></div>