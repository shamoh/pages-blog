---
layout: post
title: JAX-RS Kryo Message Body Writer & Reader performance
date: '2015-04-10T22:04:00.000+02:00'
author: Libor Kramoli≈°
tags:
- jaxrs
- jersey
- performance
- kryo
modified_time: '2015-04-10T22:04:17.781+02:00'
thumbnail: http://4.bp.blogspot.com/-Pfd0vGuIGOY/VSgXY9w6nbI/AAAAAAAAo3E/36NcAwTgVAQ/s72-c/MBPbyMethod.png
blogger_id: tag:blogger.com,1999:blog-2759548145050416517.post-3169991685584910122
blogger_orig_url: http://yatel.kramolis.cz/2015/04/jax-rs-kryo-message-body-writer-reader.html
---

In this blog post I'm going to return to one of my <a href="http://yatel.kramolis.cz/2015/03/jax-rs-message-body-writer-using-kryo.html">previous post about JAX-RS Message Body Providers</a> using&nbsp;<a href="https://github.com/EsotericSoftware/kryo">Kryo serialization framework</a>. Today I'll show you performance statistics and compare it with some of Jersey build-in providers.<br /><div><br /></div><h3>Comparing to ...</h3><div>I have chosen to compare my Kryo provider with:</div><div><ul><li><a href="https://github.com/jersey/jersey/tree/master/media/jaxb">JAXB RI providers</a> to read from and write to XML format.</li><li><a href="https://github.com/jersey/jersey/tree/master/media/json-jackson">Jackson providers</a> to read from and write to JSON format.</li><li><a href="https://github.com/jersey/jersey/blob/master/tests/performance/test-cases/mbw-custom-provider/src/main/java/org/glassfish/jersey/tests/performance/mbw/custom/PersonProvider.java">Custom provider</a> that reads and writes test entity (<a href="https://github.com/jersey/jersey/blob/master/tests/performance/test-cases/mbw-custom-provider/src/main/java/org/glassfish/jersey/tests/performance/mbw/custom/Person.java">Person</a> class) by itself. (Note: Used format is really simple and implementation is Person specific, uses artificial MIKME type application/person.)</li><li>Just plain text provider to read and write String only. It uses Jersey build-in provider.</li></ul><div>Test applications are very similar to mine <a href="https://github.com/shamoh/jersey-kryo">Jersey Kryo module</a>&nbsp;and are part of <a href="https://github.com/jersey/jersey">Jersey source code</a>:</div></div><div><ul><li><a href="https://github.com/jersey/jersey/tree/master/tests/performance/test-cases/mbw-xml-jaxb">JAXB/XML test application</a></li><li><a href="https://github.com/jersey/jersey/tree/master/tests/performance/test-cases/mbw-json-jackson">Jackson/JSON test application</a></li><li><a href="https://github.com/jersey/jersey/tree/master/tests/performance/test-cases/mbw-custom-provider">Custom provider test application</a></li><li><a href="https://github.com/jersey/jersey/tree/master/tests/performance/test-cases/mbw-text-plain">Plain text provider test application</a></li></ul><div><br /></div><h3>Kryo provider</h3></div><div>The Kryo provider has been introduced in <a href="http://yatel.kramolis.cz/2015/03/jax-rs-message-body-writer-using-kryo.html">previous blog post</a>. I have done one change since then. Performance of Kryo provider was&nbsp;several times improved using <a href="https://github.com/EsotericSoftware/kryo/blob/master/src/com/esotericsoftware/kryo/pool/KryoPool.java">KryoPool</a>:</div><div><br /></div><!-- HTML generated using hilite.me --><br /><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #a6e22e;">@Consumes</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"application/x-kryo"</span><span style="color: #f92672;">)</span><br /><span style="color: #a6e22e;">@Produces</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"application/x-kryo"</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">class</span> <span style="color: #a6e22e;">KryoMessageBodyProvider</span> <span style="color: #66d9ef;">implements</span> <span style="color: #f8f8f2;">MessageBodyWriter</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Object</span><span style="color: #f92672;">&gt;,</span><br />                <span style="color: #f8f8f2;">MessageBodyReader</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Object</span><span style="color: #f92672;">&gt;</span> <span style="color: #f92672;">{</span><br /><br />    <span style="color: #66d9ef;">private</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">KryoPool</span> <span style="color: #f8f8f2;">kryoPool</span><span style="color: #f92672;">;</span><br /><br />    <span style="color: #66d9ef;">public</span> <span style="color: #a6e22e;">KryoMessageBodyProvider</span><span style="color: #f92672;">()</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">KryoFactory</span> <span style="color: #f8f8f2;">kryoFactory</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">KryoFactory</span><span style="color: #f92672;">()</span> <span style="color: #f92672;">{</span><br />            <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">Kryo</span> <span style="color: #a6e22e;">create</span><span style="color: #f92672;">()</span> <span style="color: #f92672;">{</span><br />                <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Kryo</span> <span style="color: #f8f8f2;">kryo</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Kryo</span><span style="color: #f92672;">();</span><br />                <span style="color: #75715e;">// configure kryo instance, customize settings</span><br />                <span style="color: #66d9ef;">return</span> <span style="color: #f8f8f2;">kryo</span><span style="color: #f92672;">;</span><br />            <span style="color: #f92672;">}</span><br />        <span style="color: #f92672;">};</span><br />        <span style="color: #f8f8f2;">kryoPool</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">KryoPool</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">Builder</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">kryoFactory</span><span style="color: #f92672;">).</span><span style="color: #a6e22e;">softReferences</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">build</span><span style="color: #f92672;">();</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #75715e;">//</span><br />    <span style="color: #75715e;">// MessageBodyWriter</span><br />    <span style="color: #75715e;">//</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">long</span> <span style="color: #a6e22e;">getSize</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Object</span> <span style="color: #f8f8f2;">object</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #f92672;">-</span><span style="color: #ae81ff;">1</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">boolean</span> <span style="color: #a6e22e;">isWriteable</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                               <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #66d9ef;">true</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">void</span> <span style="color: #a6e22e;">writeTo</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Object</span> <span style="color: #f8f8f2;">object</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">,</span><br />                        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">MultivaluedMap</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">String</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Object</span><span style="color: #f92672;">&gt;</span> <span style="color: #f8f8f2;">httpHeaders</span><span style="color: #f92672;">,</span> <br />                        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">OutputStream</span> <span style="color: #f8f8f2;">entityStream</span><span style="color: #f92672;">)</span><br />            <span style="color: #66d9ef;">throws</span> <span style="color: #f8f8f2;">IOException</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">WebApplicationException</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">ByteArrayOutputStream</span> <span style="color: #f8f8f2;">baos</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">ByteArrayOutputStream</span><span style="color: #f92672;">();</span><br /><br />        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Output</span> <span style="color: #f8f8f2;">output</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Output</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">baos</span><span style="color: #f92672;">);</span><br />        <span style="color: #f8f8f2;">kryoPool</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">run</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">KryoCallback</span><span style="color: #f92672;">()</span> <span style="color: #f92672;">{</span><br />            <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">Object</span> <span style="color: #a6e22e;">execute</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Kryo</span> <span style="color: #f8f8f2;">kryo</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />                <span style="color: #f8f8f2;">kryo</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">writeObject</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">output</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">object</span><span style="color: #f92672;">);</span><br />                <span style="color: #66d9ef;">return</span> <span style="color: #66d9ef;">null</span><span style="color: #f92672;">;</span><br />            <span style="color: #f92672;">}</span><br />        <span style="color: #f92672;">});</span><br />        <span style="color: #f8f8f2;">output</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">close</span><span style="color: #f92672;">();</span><br /><br />        <span style="color: #f8f8f2;">entityStream</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">write</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">baos</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">toByteArray</span><span style="color: #f92672;">());</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #75715e;">//</span><br />    <span style="color: #75715e;">// MessageBodyReader</span><br />    <span style="color: #75715e;">//</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">boolean</span> <span style="color: #a6e22e;">isReadable</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                              <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #66d9ef;">true</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">Object</span> <span style="color: #a6e22e;">readFrom</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Object</span><span style="color: #f92672;">&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                           <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">,</span><br />                           <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">MultivaluedMap</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">String</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">String</span><span style="color: #f92672;">&gt;</span> <span style="color: #f8f8f2;">httpHeaders</span><span style="color: #f92672;">,</span><br />                           <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">InputStream</span> <span style="color: #f8f8f2;">entityStream</span><span style="color: #f92672;">)</span> <br />                <span style="color: #66d9ef;">throws</span> <span style="color: #f8f8f2;">IOException</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">WebApplicationException</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">try</span> <span style="color: #f92672;">{</span><br />            <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Input</span> <span style="color: #f8f8f2;">input</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Input</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">entityStream</span><span style="color: #f92672;">);</span><br />            <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Object</span> <span style="color: #f8f8f2;">object</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">kryoPool</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">run</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">KryoCallback</span><span style="color: #f92672;">()</span> <span style="color: #f92672;">{</span><br />                <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">Object</span> <span style="color: #a6e22e;">execute</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Kryo</span> <span style="color: #f8f8f2;">kryo</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />                    <span style="color: #66d9ef;">return</span> <span style="color: #f8f8f2;">kryo</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">readObject</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">input</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">);</span><br />                <span style="color: #f92672;">}</span><br />            <span style="color: #f92672;">});</span><br />            <span style="color: #f8f8f2;">input</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">close</span><span style="color: #f92672;">();</span><br /><br />            <span style="color: #66d9ef;">return</span> <span style="color: #f8f8f2;">object</span><span style="color: #f92672;">;</span><br />        <span style="color: #f92672;">}</span> <span style="color: #66d9ef;">catch</span> <span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Exception</span> <span style="color: #f8f8f2;">e</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />            <span style="color: #66d9ef;">throw</span> <span style="color: #66d9ef;">new</span> <span style="color: #a6e22e;">WebApplicationException</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">e</span><span style="color: #f92672;">);</span><br />        <span style="color: #f92672;">}</span><br />    <span style="color: #f92672;">}</span><br /><br /><span style="color: #f92672;">}</span><br /></pre></div><br /><h3>Test environment</h3><div>Each test application was executed using <a href="https://github.com/jersey/jersey/tree/master/containers/grizzly2-http">Grizzly HTTP Server</a>, no servlet container, on 4 core VM. And load has been produced from another 2 client VMs using <a href="https://github.com/wg/wrk">wrk</a> - a HTTP benchmarking tool. GET, POST and PUT HTTP methods was measured. It is necessary to say each test works just with one instance of Person entity. It means data load is small. Test's focus is on throughput measurement.&nbsp;</div><div><br /></div><div><h3>Test results</h3><div>Following table shows number of requests per second for each tested provider and mentioned HTTP method:</div><div><br /></div><div style="text-align: center;"><table border="1" cellpadding="0" cellspacing="0" dir="ltr" style="border-collapse: collapse; border: 1px solid #ccc; font-family: arial,sans,sans-serif; font-size: 13px; table-layout: fixed;"><colgroup><col width="153"></col><col width="68"></col><col width="70"></col><col width="62"></col></colgroup><tbody><tr style="height: 21px;"><td style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; padding: 2px 3px 2px 3px; vertical-align: bottom;"></td><td data-sheets-value="[null,2,&quot;GET&quot;]" style="background-color: #fce5cd; border-bottom: 1px solid #000000; border-right: 1px solid #000000; border-top: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: center; vertical-align: bottom;">GET</td><td data-sheets-value="[null,2,&quot;POST&quot;]" style="background-color: #fce5cd; border-bottom: 1px solid #000000; border-right: 1px solid #000000; border-top: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: center; vertical-align: bottom;">POST</td><td data-sheets-value="[null,2,&quot;PUT&quot;]" style="background-color: #fce5cd; border-bottom: 1px solid #000000; border-right: 1px solid #000000; border-top: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: center; vertical-align: bottom;">PUT</td></tr><tr style="height: 21px;"><td data-sheets-value="[null,2,&quot;XML (JAXB RI)&quot;]" style="background-color: #cfe2f3; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: center; vertical-align: bottom; vertical-align: middle;">XML (JAXB RI)</td><td data-sheets-formula="='Grizzly - Raw'!R10C1" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,21704.99966820025]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">21705</td><td data-sheets-formula="='Grizzly - Raw'!R10C2" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,11316.241537178166]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">11316</td><td data-sheets-formula="='Grizzly - Raw'!R10C3" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,12080.160191261519]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">12080</td></tr><tr style="height: 21px;"><td data-sheets-value="[null,2,&quot;JSON (Jackson)&quot;]" style="background-color: #cfe2f3; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: center; vertical-align: bottom; vertical-align: middle;">JSON (Jackson)</td><td data-sheets-formula="='Grizzly - Raw'!R10C4" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,22097.179341419476]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">22097</td><td data-sheets-formula="='Grizzly - Raw'!R10C5" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,18590.0384261077]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">18590</td><td data-sheets-formula="='Grizzly - Raw'!R10C6" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,20115.832087282335]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">20116</td></tr><tr style="height: 21px;"><td data-sheets-value="[null,2,&quot;Kryo&quot;]" style="background-color: #cfe2f3; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: center; vertical-align: bottom; vertical-align: middle;">Kryo</td><td data-sheets-formula="='Grizzly - Raw'!R10C13" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,21533.097328665102]" style="background-color: #d9ead3; border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">21533</td><td data-sheets-formula="='Grizzly - Raw'!R10C14" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,18370.75919471428]" style="background-color: #d9ead3; border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">18371</td><td data-sheets-formula="='Grizzly - Raw'!R10C15" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,21304.09941608362]" style="background-color: #d9ead3; border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">21304</td></tr><tr style="height: 21px;"><td data-sheets-value="[null,2,&quot;Custom&quot;]" style="background-color: #cfe2f3; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: center; vertical-align: bottom; vertical-align: middle;">Custom</td><td data-sheets-formula="='Grizzly - Raw'!R10C7" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,21542.6853606492]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">21543</td><td data-sheets-formula="='Grizzly - Raw'!R10C8" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,18884.184308053365]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">18884</td><td data-sheets-formula="='Grizzly - Raw'!R10C9" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,20442.3464293926]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">20442</td></tr><tr style="height: 21px;"><td data-sheets-value="[null,2,&quot;TEXT (String)&quot;]" style="background-color: #cfe2f3; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; font-weight: bold; padding: 2px 3px 2px 3px; text-align: center; vertical-align: bottom; vertical-align: middle;">TEXT (String)</td><td data-sheets-formula="='Grizzly - Raw'!R10C10" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,21815.9496054341]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">21816</td><td data-sheets-formula="='Grizzly - Raw'!R10C11" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,17694.739488718216]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">17695</td><td data-sheets-formula="='Grizzly - Raw'!R10C12" data-sheets-numberformat="[null,2,&quot;0&quot;]" data-sheets-value="[null,3,null,19881.50361843937]" style="border-bottom: 1px solid #000000; border-right: 1px solid #000000; font-size: 100%; padding: 2px 3px 2px 3px; text-align: right; vertical-align: bottom; vertical-align: bottom;">19882</td></tr></tbody></table></div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Pfd0vGuIGOY/VSgXY9w6nbI/AAAAAAAAo3E/36NcAwTgVAQ/s1600/MBPbyMethod.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-Pfd0vGuIGOY/VSgXY9w6nbI/AAAAAAAAo3E/36NcAwTgVAQ/s1600/MBPbyMethod.png" /></a><a href="http://3.bp.blogspot.com/-73GGM7gOW5o/VSgXY7IjGYI/AAAAAAAAo3A/GlAtWbtsUMo/s1600/MBPbyProvider.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-73GGM7gOW5o/VSgXY7IjGYI/AAAAAAAAo3A/GlAtWbtsUMo/s1600/MBPbyProvider.png" /></a></div><br /><h3>Conclusion</h3></div><div>Please note the Kryo provider is not in production quality. It just demonstrates how simple it is to enhance JAX-RS runtime to support new entity media type. However it is naive implementation of message body provider it provides very good performance. Kryo also support class registration and compression features that can also affect performance.<br /><br />And finally, test applications work just with one instance of entity (Person). I guess Kryo could show it's power while working with more complex objects or with collection of them. And Kryo compression feature would be very strong in such case. Maybe I could prepare such test in couple of next months. ;-)<br /><br /></div>