---
layout: post
title: JAX-RS Message Body Writer & Reader using Kryo serialization framework
date: '2015-03-11T01:56:00.000+01:00'
author: Libor Kramoli≈°
tags:
- jaxrs
- jersey
- kryo
modified_time: '2015-03-29T21:24:51.976+02:00'
blogger_id: tag:blogger.com,1999:blog-2759548145050416517.post-3966200638731656688
blogger_orig_url: http://yatel.kramolis.cz/2015/03/jax-rs-message-body-writer-using-kryo.html
---

<br />In this post I'm gonna show you how simple it is to enhance JAX-RS application by a new body format. In this example I use <b>Kryo</b> serialization framework.<br /><br /><h3>Kryo serialization framework</h3><blockquote class="tr_bq"><a href="http://kryo.googlecode.com/svn/wiki/kryo-logo.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://kryo.googlecode.com/svn/wiki/kryo-logo.jpg" height="84" width="200" /></a><br /><blockquote class="tr_bq"><a href="https://github.com/EsotericSoftware/kryo">Kryo</a> is a fast and efficient object graph serialization framework for Java. The goals of the project are speed, efficiency, and an easy to use API. The project is useful any time objects need to be persisted, whether to a file, database, or over the network.</blockquote><blockquote class="tr_bq">Kryo can also perform automatic deep and shallow copying/cloning. This is direct copying from object to object, not object-&gt;bytes-&gt;object.</blockquote></blockquote><h3>JAX-RS Message Body providers</h3>JAX-RS allows you to enhance JAX-RS engine to support another body type. There is&nbsp;<a href="https://jax-rs-spec.java.net/nonav/2.0/apidocs/javax/ws/rs/ext/MessageBodyReader.html">MessageBodyReader</a>&nbsp;and&nbsp;<a href="https://jax-rs-spec.java.net/nonav/2.0/apidocs/javax/ws/rs/ext/MessageBodyWriter.html">MessageBodyWriter</a>&nbsp;SPI to be implemented. I have chosen to use&nbsp;<span style="font-family: Courier New, Courier, monospace;">application/x-kryo</span> media type for Kryo (de)serialized message bodies.<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f92672;">package</span> <span style="color: #f8f8f2;">cz</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">kramolis</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">jersey</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">kryo</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">java.io.ByteArrayOutputStream</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">java.io.IOException</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">java.io.InputStream</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">java.io.OutputStream</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">java.lang.annotation.Annotation</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">java.lang.reflect.Type</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.Consumes</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.Produces</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.WebApplicationException</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.core.MediaType</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.core.MultivaluedMap</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.ext.MessageBodyReader</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.ext.MessageBodyWriter</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">com.esotericsoftware.kryo.Kryo</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">com.esotericsoftware.kryo.io.Input</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">com.esotericsoftware.kryo.io.Output</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #a6e22e;">@Consumes</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"application/x-kryo"</span><span style="color: #f92672;">)</span><br /><span style="color: #a6e22e;">@Produces</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"application/x-kryo"</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">class</span> <span style="color: #a6e22e;">KryoMessageBodyProvider</span> <span style="color: #66d9ef;">implements</span><br />                        <span style="color: #f8f8f2;">MessageBodyWriter</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Object</span><span style="color: #f92672;">&gt;,</span><br />                        <span style="color: #f8f8f2;">MessageBodyReader</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Object</span><span style="color: #f92672;">&gt;</span> <span style="color: #f92672;">{</span><br /><br />    <span style="color: #75715e;">//</span><br />    <span style="color: #75715e;">// MessageBodyWriter</span><br />    <span style="color: #75715e;">//</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">long</span> <span style="color: #a6e22e;">getSize</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Object</span> <span style="color: #f8f8f2;">object</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                        <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #f92672;">-</span><span style="color: #ae81ff;">1</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">boolean</span> <span style="color: #a6e22e;">isWriteable</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                        <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #66d9ef;">true</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">void</span> <span style="color: #a6e22e;">writeTo</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Object</span> <span style="color: #f8f8f2;">object</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                        <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">,</span><br />                        <span style="color: #f8f8f2;">MultivaluedMap</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">String</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Object</span><span style="color: #f92672;">&gt;</span> <span style="color: #f8f8f2;">httpHeaders</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">OutputStream</span> <span style="color: #f8f8f2;">entityStream</span><span style="color: #f92672;">)</span><br />            <span style="color: #66d9ef;">throws</span> <span style="color: #f8f8f2;">IOException</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">WebApplicationException</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">ByteArrayOutputStream</span> <span style="color: #f8f8f2;">baos</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">ByteArrayOutputStream</span><span style="color: #f92672;">();</span><br /><br />        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Kryo</span> <span style="color: #f8f8f2;">kryo</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Kryo</span><span style="color: #f92672;">();</span><br />        <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Output</span> <span style="color: #f8f8f2;">output</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Output</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">baos</span><span style="color: #f92672;">);</span><br /><br />        <span style="color: #f8f8f2;">kryo</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">writeObject</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">output</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">object</span><span style="color: #f92672;">);</span><br />        <span style="color: #f8f8f2;">output</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">close</span><span style="color: #f92672;">();</span><br /><br />        <span style="color: #f8f8f2;">entityStream</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">write</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">baos</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">toByteArray</span><span style="color: #f92672;">());</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #75715e;">//</span><br />    <span style="color: #75715e;">// MessageBodyReader</span><br />    <span style="color: #75715e;">//</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">boolean</span> <span style="color: #a6e22e;">isReadable</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                        <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #66d9ef;">true</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">Object</span> <span style="color: #a6e22e;">readFrom</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Object</span><span style="color: #f92672;">&gt;</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">Type</span> <span style="color: #f8f8f2;">genericType</span><span style="color: #f92672;">,</span><br />                           <span style="color: #f8f8f2;">Annotation</span><span style="color: #f92672;">[]</span> <span style="color: #f8f8f2;">annotations</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">MediaType</span> <span style="color: #f8f8f2;">mediaType</span><span style="color: #f92672;">,</span><br />                           <span style="color: #f8f8f2;">MultivaluedMap</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">String</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">String</span><span style="color: #f92672;">&gt;</span> <span style="color: #f8f8f2;">httpHeaders</span><span style="color: #f92672;">,</span><br />                           <span style="color: #f8f8f2;">InputStream</span> <span style="color: #f8f8f2;">entityStream</span><span style="color: #f92672;">)</span> <span style="color: #66d9ef;">throws</span> <span style="color: #f8f8f2;">IOException</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">WebApplicationException</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">try</span> <span style="color: #f92672;">{</span><br />            <span style="color: #f8f8f2;">Kryo</span> <span style="color: #f8f8f2;">kryo</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Kryo</span><span style="color: #f92672;">();</span><br />            <span style="color: #f8f8f2;">Input</span> <span style="color: #f8f8f2;">input</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Input</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">entityStream</span><span style="color: #f92672;">);</span><br />            <span style="color: #f8f8f2;">Object</span> <span style="color: #f8f8f2;">object</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">kryo</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">readObject</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">input</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">type</span><span style="color: #f92672;">);</span><br />            <span style="color: #f8f8f2;">input</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">close</span><span style="color: #f92672;">();</span><br /><br />            <span style="color: #66d9ef;">return</span> <span style="color: #f8f8f2;">object</span><span style="color: #f92672;">;</span><br />        <span style="color: #f92672;">}</span> <span style="color: #66d9ef;">catch</span> <span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Exception</span> <span style="color: #f8f8f2;">e</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />            <span style="color: #66d9ef;">throw</span> <span style="color: #66d9ef;">new</span> <span style="color: #a6e22e;">WebApplicationException</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">e</span><span style="color: #f92672;">);</span><br />        <span style="color: #f92672;">}</span><br />    <span style="color: #f92672;">}</span><br /><br /><span style="color: #f92672;">}</span><br /></pre></div><br />You can see it is really simple Message Body provider. But I hope it shows you the way...<br /><br />Than you need to register provider class into JAX-RS Application, e.g.<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f92672;">package</span> <span style="color: #f8f8f2;">cz</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">kramolis</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">jersey</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">kryo</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">java.util.HashSet</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">java.util.Set</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.core.Application</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">class</span> <span style="color: #a6e22e;">JaxRsApplication</span> <span style="color: #66d9ef;">extends</span> <span style="color: #f8f8f2;">Application</span> <span style="color: #f92672;">{</span><br /><br />    <span style="color: #66d9ef;">static</span> <span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Set</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;&gt;</span> <span style="color: #f8f8f2;">APP_CLASSES</span> <span style="color: #f92672;">=</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">HashSet</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;&gt;()</span> <span style="color: #f92672;">{{ "{{" }}</span><br />        <span style="color: #f8f8f2;">add</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">KryoMessageBodyProvider</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">class</span><span style="color: #f92672;">);</span><br />        <span style="color: #f8f8f2;">add</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">PersonResource</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">class</span><span style="color: #f92672;">);</span><br />    <span style="color: #f92672;">}};</span><br /><br />    <span style="color: #a6e22e;">@Override</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">Set</span><span style="color: #f92672;">&lt;</span><span style="color: #f8f8f2;">Class</span><span style="color: #f92672;">&lt;?&gt;&gt;</span> <span style="color: #f8f8f2;">getClasses</span><span style="color: #f92672;">()</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #f8f8f2;">APP_CLASSES</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br /><span style="color: #f92672;">}</span><br /></pre></div><br /><br />And finally usage of the new body type is very easy:<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f92672;">package</span> <span style="color: #f8f8f2;">cz</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">kramolis</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">jersey</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">kryo</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.Consumes</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.GET</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.POST</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.PUT</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.Path</span><span style="color: #f92672;">;</span><br /><span style="color: #f92672;">import</span> <span style="color: #f8f8f2;">javax.ws.rs.Produces</span><span style="color: #f92672;">;</span><br /><br /><span style="color: #a6e22e;">@Path</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"/"</span><span style="color: #f92672;">)</span><br /><span style="color: #a6e22e;">@Consumes</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"application/x-kryo"</span><span style="color: #f92672;">)</span><br /><span style="color: #a6e22e;">@Produces</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"application/x-kryo"</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">class</span> <span style="color: #a6e22e;">PersonResource</span> <span style="color: #f92672;">{</span><br /><br />    <span style="color: #a6e22e;">@POST</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">Person</span> <span style="color: #a6e22e;">echo</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Person</span> <span style="color: #f8f8f2;">person</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #f8f8f2;">person</span><span style="color: #f92672;">;</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #a6e22e;">@PUT</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #66d9ef;">void</span> <span style="color: #a6e22e;">put</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">final</span> <span style="color: #f8f8f2;">Person</span> <span style="color: #f8f8f2;">person</span><span style="color: #f92672;">)</span> <span style="color: #f92672;">{</span><br />    <span style="color: #f92672;">}</span><br /><br />    <span style="color: #a6e22e;">@GET</span><br />    <span style="color: #66d9ef;">public</span> <span style="color: #f8f8f2;">Person</span> <span style="color: #a6e22e;">get</span><span style="color: #f92672;">()</span> <span style="color: #f92672;">{</span><br />        <span style="color: #66d9ef;">return</span> <span style="color: #66d9ef;">new</span> <span style="color: #a6e22e;">Person</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"Wolfgang"</span><span style="color: #f92672;">,</span> <span style="color: #ae81ff;">21</span><span style="color: #f92672;">,</span> <span style="color: #e6db74;">"Salzburg"</span><span style="color: #f92672;">);</span><br />    <span style="color: #f92672;">}</span><br /><br /><span style="color: #f92672;">}</span><br /></pre></div><br /><br /><h3>Conclusion</h3>Whole sources are available in dedicated <a href="https://github.com/shamoh/jersey-kryo">GitHub repository</a>. Use it as you need. JAX-RS provides really simple way how to extend it's support. And Kryo is really powerful framework. Give it a try. Look at deeper&nbsp;<a href="https://github.com/eishay/jvm-serializers">JVM serializers comparision</a>.<br /><br />In one of the next blog posts I will provider some performance data comparing Kryo with JSON, XML and others message body providers.<br /><br /><h3>Links</h3><ul><li><a href="https://github.com/EsotericSoftware/kryo">https://github.com/EsotericSoftware/kryo</a> - Kryo GitHub</li><li><a href="https://github.com/eishay/jvm-serializers">https://github.com/eishay/jvm-serializers</a> -&nbsp;Benchmark comparing serialization libraries on the JVM</li><li><a href="https://github.com/jersey/jersey">https://github.com/jersey/jersey</a> - Jersey GitHub</li><li><a href="https://jersey.java.net/">https://jersey.java.net/</a> - Jersey home page</li><li><a href="https://jersey.java.net/documentation/latest/message-body-workers.html">https://jersey.java.net/documentation/latest/message-body-workers.html</a> - Jersey Message Body providers docs</li><li><a href="https://github.com/shamoh/jersey-kryo">https://github.com/shamoh/jersey-kryo</a> - this blog post example GitHub project</li></ul><div><br /></div>