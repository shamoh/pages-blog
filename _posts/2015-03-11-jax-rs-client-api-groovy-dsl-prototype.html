---
layout: post
title: JAX-RS Client API Groovy DSL, prototype
date: '2015-03-11T23:58:00.002+01:00'
author: Libor Kramoli≈°
tags:
- dsl
- groovy
- jaxrs
- spock
- jersey
modified_time: '2015-03-14T11:49:06.694+01:00'
blogger_id: tag:blogger.com,1999:blog-2759548145050416517.post-6371755606087356315
blogger_orig_url: http://yatel.kramolis.cz/2015/03/jax-rs-client-api-groovy-dsl-prototype.html
---

<a href="http://groovy-lang.org/">Groovy language</a> is DSL friendly language. &nbsp;See&nbsp;<a href="http://groovy-lang.org/dsls.html">http://groovy-lang.org/dsls.html</a> or&nbsp;<a href="http://groovy.codehaus.org/Writing+Domain-Specific+Languages">http://groovy.codehaus.org/Writing+Domain-Specific+Languages</a>.<br><br>Let me share with you my JAX-RS Client API Groovy DSL prototype, code is available in GitHub&nbsp;<a href="https://github.com/shamoh/jersey-groovy">https://github.com/shamoh/jersey-groovy</a>&nbsp;repo. It just supports GET and POST methods. This is really just concept prototype. But it shows power of Groovy and way how simplified JAX-RS Client API could look like.<br><br>The GitHub repository contains couple of <a href="https://github.com/shamoh/jersey-groovy/tree/master/tests/src/test/groovy/org/glassfish/jersey/groovy/tests">unit tests</a>&nbsp;to show the DSL. And also uses <a href="https://code.google.com/p/spock/">Spock Framework</a>&nbsp;what is another Groovy DSL example, in this case as testing framework/API.<br><br><h3>Examples</h3><h4>GET plain text, no parameters</h4><div>JAX-RS Client API:</div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">WebTarget</span> <span style="color: #f8f8f2;">target</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">ClientBuilder</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">newClient</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">target</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">target</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">request</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">TEXT_PLAIN_TYPE</span><span style="color: #f92672;">).</span><span style="color: #a6e22e;">get</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">String</span><span style="color: #f92672;">)</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello World!"</span><br /></pre></div></div><div>Jersey Groovy DSL:</div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">GET</span><span style="color: #f92672;">[</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">].</span><span style="color: #a6e22e;">text</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello World!"</span><br /></pre></div></div><h4><br></h4><h4>GET plain text, path parameter</h4><div>JAX-RS Client API:</div><div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">WebTarget</span> <span style="color: #f8f8f2;">target</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">ClientBuilder</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">newClient</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">target</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">target</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">path</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"Jersey"</span><span style="color: #f92672;">).</span><span style="color: #a6e22e;">request</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">TEXT_PLAIN_TYPE</span><span style="color: #f92672;">).</span><span style="color: #a6e22e;">get</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">String</span><span style="color: #f92672;">)</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello Jersey!"</span><br /></pre></div></div><div>Jersey Groovy DSL:</div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">GET</span><span style="color: #f92672;">[</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">/</span><span style="color: #e6db74;">"Jersey"</span><span style="color: #f92672;">].</span><span style="color: #a6e22e;">text</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello Jersey!"</span><br /></pre></div></div></div><h4><br></h4><h4>GET XML, path parameter</h4><div>JAX-RS Client API:</div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">WebTarget</span> <span style="color: #f8f8f2;">target</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">ClientBuilder</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">newClient</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">target</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">target</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">path</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"Jersey"</span><span style="color: #f92672;">).</span><span style="color: #a6e22e;">request</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">APPLICATION_XML_TYPE</span><span style="color: #f92672;">).</span><span style="color: #a6e22e;">get</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">Message</span><span style="color: #f92672;">)</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #66d9ef;">instanceof</span> <span style="color: #f8f8f2;">Message</span><br /><span style="color: #f8f8f2;">response</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">greeting</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello Jersey!"</span><br /></pre></div></div><div>Jersey Groovy DSL:</div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f92672;">(</span><span style="color: #f8f8f2;">GET</span><span style="color: #f92672;">[</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">/</span><span style="color: #e6db74;">"Jersey"</span><span style="color: #f92672;">]</span> <span style="color: #f92672;">&amp;</span> <span style="color: #f8f8f2;">APPLICATION_XML_TYPE</span><span style="color: #f92672;">)</span> <span style="color: #66d9ef;">as</span> <span style="color: #f8f8f2;">Message</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #66d9ef;">instanceof</span> <span style="color: #f8f8f2;">Message</span><br /><span style="color: #f8f8f2;">response</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">greeting</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello Jersey!"</span><br /></pre></div></div><h4><br></h4><h4>POST plain text, response text</h4><div>JAX-RS Client API:</div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">WebTarget</span> <span style="color: #f8f8f2;">target</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">ClientBuilder</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">newClient</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">target</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">Entity</span> <span style="color: #f8f8f2;">entity</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">Entity</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">entity</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"Jersey"</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">TEXT_PLAIN_TYPE</span><span style="color: #f92672;">);</span><br /><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">target</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">request</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">post</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">entity</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">String</span><span style="color: #f92672;">)</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello Jersey!"</span><br /></pre></div></div><div>Jersey Groovy DSL:</div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">POST</span><span style="color: #f92672;">[</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">]</span> <span style="color: #f92672;">&lt;&lt;</span> <span style="color: #e6db74;">"Jersey"</span> <span style="color: #66d9ef;">as</span> <span style="color: #f8f8f2;">String</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello Jersey!"</span><br /></pre></div></div><div><br></div><h4>POST object as JSON, response text</h4><div>JAX-RS Client API:</div><div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #f8f8f2;">WebTarget</span> <span style="color: #f8f8f2;">target</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">ClientBuilder</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">newClient</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">target</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">Entity</span> <span style="color: #f8f8f2;">entity</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">Entity</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">entity</span><span style="color: #f92672;">(</span><span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Message</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"Jersey"</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Date</span><span style="color: #f92672;">()),</span> <span style="color: #f8f8f2;">APPLICATION_JSON_TYPE</span><span style="color: #f92672;">)</span><br /><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f8f8f2;">target</span><span style="color: #f92672;">.</span><span style="color: #a6e22e;">request</span><span style="color: #f92672;">().</span><span style="color: #a6e22e;">post</span><span style="color: #f92672;">(</span><span style="color: #f8f8f2;">entity</span><span style="color: #f92672;">,</span> <span style="color: #f8f8f2;">String</span><span style="color: #f92672;">)</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello Jersey!"</span><br /></pre></div></div><div>Jersey Groovy DSL:</div><div><div style="background: #272822; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #66d9ef;">def</span> <span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">=</span> <span style="color: #f92672;">(</span><span style="color: #f8f8f2;">POST</span><span style="color: #f92672;">[</span><span style="color: #f8f8f2;">RESOURCE_URL</span><span style="color: #f92672;">]</span> <span style="color: #f92672;">|</span> <span style="color: #f8f8f2;">APPLICATION_JSON_TYPE</span><span style="color: #f92672;">)</span> <span style="background-color: #1e0010; color: #960050;">\</span><br />                   <span style="color: #f92672;">&lt;&lt;</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Message</span><span style="color: #f92672;">(</span><span style="color: #e6db74;">"Jersey"</span><span style="color: #f92672;">,</span> <span style="color: #66d9ef;">new</span> <span style="color: #f8f8f2;">Date</span><span style="color: #f92672;">())</span> <span style="color: #66d9ef;">as</span> <span style="color: #f8f8f2;">String</span><br /><span style="color: #f8f8f2;">response</span> <span style="color: #f92672;">==</span> <span style="color: #e6db74;">"Hello Jersey!"</span><br /></pre></div></div></div><br>(And finally there is simple&nbsp;<a href="http://shamoh.github.io/jersey-groovy/slides/">slide deck</a>&nbsp;to introduce the DSL API, same examples.)<br><div><br></div>Enjoy.<br><br>