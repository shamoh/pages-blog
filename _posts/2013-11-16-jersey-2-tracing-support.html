---
layout: post
title: Jersey 2 - Tracing support
date: '2013-11-16T00:11:00.000+01:00'
author: Libor Kramoliš
tags:
- jaxrs
- jersey
- diagnostics
modified_time: '2013-11-16T00:11:23.960+01:00'
blogger_id: tag:blogger.com,1999:blog-2759548145050416517.post-3141871233202950217
blogger_orig_url: http://yatel.kramolis.cz/2013/11/jersey-2-tracing-support.html
---

<h2>What is Jersey?</h2>This is my first Jersey related post so let me introduce <a href="https://jersey.java.net/">Jersey framework</a>.<br /><blockquote class="tr_bq"><a href="https://jersey.java.net/images/jersey_logo.png" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="https://jersey.java.net/images/jersey_logo.png" /></a>Jersey RESTful Web Services framework is open source, production quality, framework for developing RESTful Web Services in Java that provides support for <a href="http://jax-rs-spec.java.net/">JAX-RS</a> APIs and serves as a JAX-RS (JSR 311 &amp; JSR 339) Reference Implementation.<br /><br />Jersey framework is more than the JAX-RS Reference Implementation. Jersey provides it’s own <a href="https://jersey.java.net/apidocs/latest/jersey/">API</a> that extend the JAX-RS toolkit with additional features and utilities to further simplify RESTful service and client development. Jersey also exposes numerous extension SPIs so that developers may extend Jersey to best suit their needs. </blockquote>Today I would like to introduce Tracing support feature that is part of Jersey 2 <a href="https://jersey.java.net/release-notes/2.3.html">since 2.3 release</a>. Current version of writing this blog post is 2.4.1.<br /><br /><h2>Tracing Support</h2>Jersey can provide tracing or diagnostic information about server-side processing of individual requests. This facility may provide vital information when troubleshooting your misbehaving Jersey or JAX-RS application. When enabled, Jersey tracing facility collects useful information from all parts of JAX-RS server-side request processing pipeline: <span style="font-family: Courier New, Courier, monospace;">PreMatchRequestFilter</span>, <span style="font-family: Courier New, Courier, monospace;">ResourceMatching</span>, <span style="font-family: Courier New, Courier, monospace;">RequestFilter</span>, <span style="font-family: Courier New, Courier, monospace;">ReadIntercept</span>, <span style="font-family: Courier New, Courier, monospace;">MBR</span>, <span style="font-family: Courier New, Courier, monospace;">Invoke</span>, <span style="font-family: Courier New, Courier, monospace;">ResponseFilter</span>, <span style="font-family: Courier New, Courier, monospace;">WriteIntercept</span>, <span style="font-family: Courier New, Courier, monospace;">MBW</span>, as well as <span style="font-family: Courier New, Courier, monospace;">ExceptionHandling</span>.<br /><br />The collected tracing information related to a single request is returned to the requesting client in the HTTP headers of a response for the request. The information is also logged on the server-side using a dedicated Java Logger instance.<br /><br /><h3>Configuration options</h3><br />Tracing support is disabled by default. You can enable it either "globally" for all application requests or selectively per request. The tracing support activation is controlled by setting the <span style="font-family: Courier New, Courier, monospace;">jersey.config.server.tracing</span> application configuration property (<a href="https://jersey.java.net/apidocs/latest/jersey/org/glassfish/jersey/server/ServerProperties.html#TRACING">ServerProperties.TRACING</a>). The property value is expected to be one of the following:<br /><ul><li><span style="font-family: Courier New, Courier, monospace;">OFF</span> - tracing support is disabled (default value).</li><li><span style="font-family: Courier New, Courier, monospace;">ON_DEMAND</span> - tracing support is in a stand-by mode; it is enabled selectively per request, via a special <span style="font-family: Courier New, Courier, monospace;">X-Jersey-Tracing-Accept</span> HTTP request header.</li><li><span style="font-family: Courier New, Courier, monospace;">ALL</span> - tracing support is enabled for all request.</li></ul><br />The level of detail of the information provided by Jersey tracing facility - the tracing threshold - can be customized. The tracing threshold can be set at the application level via <span style="font-family: Courier New, Courier, monospace;">jersey.config.server.tracing.threshold</span> application configuration property (<a href="https://jersey.java.net/apidocs/latest/jersey/org/glassfish/jersey/server/ServerProperties.html#TRACING_THRESHOLD">ServerProperties.TRACING_THRESHOLD</a>), or at a request level, via <span style="font-family: Courier New, Courier, monospace;">X-Jersey-Tracing-Threshold</span> HTTP request header. The request level configuration overrides any application level setting. There are 3 supported levels of detail for Jersey tracing:<br /><ul><li><span style="font-family: Courier New, Courier, monospace;">SUMMARY</span> - very basic summary information about the main request processing stages.</li><li><span style="font-family: Courier New, Courier, monospace;">TRACE</span> - detailed information about activities in all the main request processing stages (default threshold value).</li><li><span style="font-family: Courier New, Courier, monospace;">VERBOSE</span> - most verbose mode that provides extended information similar to <span style="font-family: Courier New, Courier, monospace;">TRACE</span> level, however with details on entity providers (<span style="font-family: Courier New, Courier, monospace;">MBR</span>/<span style="font-family: Courier New, Courier, monospace;">MBW</span>) that were skipped during the provider selection phase for any reason (lower priority, pattern matching, etc). Additionally, in this mode all received request headers are echoed as part of the tracing information.</li></ul>Both properties accept <span style="font-family: Courier New, Courier, monospace;">String</span> value only.<br /><br /><h3>Tracing Log</h3><br />As mentioned earlier, all tracing information is also logged using a dedicated Java Logger at server-side. The individual tracing messages are logged immediately as the tracing events occur. The default name of the tracing logger is prefixed <span style="font-family: Courier New, Courier, monospace;">org.glassfish.jersey.tracing.</span> with a default suffix <span style="font-family: Courier New, Courier, monospace;">general</span>. This logger name can be customized per request by including a <span style="font-family: Courier New, Courier, monospace;">X-Jersey-Tracing-Logger</span> HTTP request header as will be shown later.<br /><br /><h3>Configuring tracing support via HTTP request headers</h3><br />Whenever the tracing support is active (<span style="font-family: Courier New, Courier, monospace;">ON_DEMAND</span> or <span style="font-family: Courier New, Courier, monospace;">ALL</span>) you can customize the tracing behaviour by including one or more of the following request HTTP headers in your individual requests:<br /><ul><li><span style="font-family: Courier New, Courier, monospace;">X-Jersey-Tracing-Accept</span> - used to enable the tracing support for the particular request. It is applied only when the application-level tracing support is configured to <span style="font-family: Courier New, Courier, monospace;">ON_DEMAND</span> mode. The value of the header is not used by the Jersey tracing facility and as such it can be any arbitrary (even empty) string.</li><li><span style="font-family: Courier New, Courier, monospace;">X-Jersey-Tracing-Threshold</span> - used to override the tracing level of detail. Allowed values are: <span style="font-family: Courier New, Courier, monospace;">SUMMARY</span>, <span style="font-family: Courier New, Courier, monospace;">TRACE</span>, <span style="font-family: Courier New, Courier, monospace;">VERBOSE</span>.</li><li><span style="font-family: Courier New, Courier, monospace;">X-Jersey-Tracing-Logger</span> - used to override the tracing Java logger name suffix.</li></ul><br /><h3>Format of the HTTP response headers</h3><br />At the end of request processing all tracing messages are appended to the HTTP response as individual headers named <span style="font-family: Courier New, Courier, monospace;">X-Jersey-Tracing-<i>nnn</i></span> where <span style="font-family: Courier New, Courier, monospace;"><i>nnn</i></span> is index number of message starting at <span style="font-family: Courier New, Courier, monospace;">0</span>.<br /><br />Each tracing message is in the following format: <span style="font-family: Courier New, Courier, monospace;">CATEGORY [TIME] TEXT</span>, e.g.<br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-007: WI &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[85.95 / 183.69 ms | 46.77 %] WriteTo summary: 4 interceptors</span><br /><br />The <span style="font-family: Courier New, Courier, monospace;">CATEGORY</span> is used to categorize tracing events according to the following event types:<br /><ul><li><span style="font-family: Courier New, Courier, monospace;">START</span> - start of request processing information</li><li><span style="font-family: Courier New, Courier, monospace;">PRE-MATCH</span> - pre-matching request filter processing</li><li><span style="font-family: Courier New, Courier, monospace;">MATCH</span> - matching request URI to a resource method</li><li><span style="font-family: Courier New, Courier, monospace;">REQ-FILTER</span> - request filter processing</li><li><span style="font-family: Courier New, Courier, monospace;">RI</span> - entity reader interceptor processing</li><li><span style="font-family: Courier New, Courier, monospace;">MBR</span> - message body reader selection and invocation</li><li><span style="font-family: Courier New, Courier, monospace;">INVOKE</span> - resource method invocation</li><li><span style="font-family: Courier New, Courier, monospace;">RESP-FILTER</span> - response filter processing</li><li><span style="font-family: Courier New, Courier, monospace;">WI</span> - write interceptor processing</li><li><span style="font-family: Courier New, Courier, monospace;">MBW</span> - message body writer selection and invocation</li><li><span style="font-family: Courier New, Courier, monospace;">MVC</span> - template engine integration</li><li><span style="font-family: Courier New, Courier, monospace;">EXCEPTION</span> - exception mapping</li><li><span style="font-family: Courier New, Courier, monospace;">FINISHED</span> - processing finish summary</li></ul><br />The <span style="font-family: Courier New, Courier, monospace;">TIME</span>, if present, is a composite value that consists of 3 parts <span style="font-family: Courier New, Courier, monospace;">[ duration / time_from_start | total_req_ratio ]</span>:<br /><ol><li><span style="font-family: Courier New, Courier, monospace;">duration</span> - the duration of the current trace event [milliseconds]; e.g. duration of filter processing</li><li><span style="font-family: Courier New, Courier, monospace;">time_from_start</span> - the end time of the current event with respect to the request processing start time [milliseconds]</li><li><span style="font-family: Courier New, Courier, monospace;">total_req_ratio</span> - the duration of the current event with respect to the total request processing time [percentage]; this value tells you how significant part of the whole request processing time has been spent in the processing phase described by the current event</li></ol><br />There are certain tracing events that do not have any duration. In such case, duration values are not set (<span style="font-family: Courier New, Courier, monospace;">----</span> literal).<br /><br />The tracing event <span style="font-family: Courier New, Courier, monospace;">TEXT</span> is a free-form detailed text information about the current diagnostic event.<br /><blockquote class="tr_bq">For better identification, instances of JAX-RS components are represented by class name, identity hash code and <span style="font-family: Courier New, Courier, monospace;">@Priority</span> value if set, example of filter instance with priority 5001: <span style="font-family: Courier New, Courier, monospace;">[org.glassfish.jersey.tests.integration.tracing.ContainerResponseFilter5001 @494a8227 #5001]</span>.</blockquote><br /><h3>Tracing Examples</h3><h3><br /></h3><h4>Threshold header, SUMMARY level example</h4><br />Example of <span style="font-family: Courier New, Courier, monospace;">SUMMARY</span> level messages from <span style="font-family: Courier New, Courier, monospace;">tests/integration/tracing-support</span> module. Test application returns tracing headers for every request (<a href="https://github.com/jersey/jersey/blob/master/tests/integration/tracing-support/src/main/java/org/glassfish/jersey/tests/integration/tracing/AllTracingSupport.java#L53">AllTracingSupport.java</a>,&nbsp;<a href="https://github.com/jersey/jersey/blob/master/tests/integration/tracing-support/src/main/java/org/glassfish/jersey/tests/integration/tracing/TracingSupport.java#L53">TracingSupport.java</a>).<br /><br />Run test application using Jetty server:<br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">~/jersey2/tests/integration/<b>tracing-support</b>$ <b>mvn compile jetty:run</b></span><br /><br />Let's trace <span style="font-family: Courier New, Courier, monospace;">POST</span> request with <span style="font-family: Courier New, Courier, monospace;">SUMMARY</span> level using "<span style="font-family: Courier New, Courier, monospace;">Threshold</span>" header (replacing default <span style="font-family: Courier New, Courier, monospace;">TRACE</span> level):<br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">$ curl -i http://localhost:9998/ALL/root/sub-resource-locator/sub-resource-method -H content-type:application/x-jersey-test --data '-=#[LKR]#=-' -H <b>X-Jersey-Tracing-Threshold:SUMMARY</b> -H accept:application/x-jersey-test -X POST</span><br /><span style="font-family: 'Courier New', Courier, monospace;"><br /></span><span style="font-family: 'Courier New', Courier, monospace;"><span style="font-size: x-small;">X-Jersey-Tracing-000: <b>START</b> &nbsp; &nbsp; &nbsp; [ ---- / &nbsp;---- ms | &nbsp;---- %] baseUri=[http://localhost:9998/ALL/] requestUri=[http://localhost:9998/ALL/root/sub-resource-locator/sub-resource-method] method=[POST] authScheme=[n/a] accept=[application/x-jersey-test] accept-encoding=n/a accept-charset=n/a accept-language=n/a content-type=[application/x-jersey-test] content-length=[11]</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-001: <b>PRE-MATCH</b> &nbsp; [ 0.01 / &nbsp;0.68 ms | &nbsp;0.01 %] PreMatchRequest summary: 2 filters</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-002: <b>MATCH</b> &nbsp; &nbsp; &nbsp; [ 8.44 / &nbsp;9.15 ms | &nbsp;4.59 %] RequestMatching summary</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-003: <b>REQ-FILTER</b> &nbsp;[ 0.01 / &nbsp;9.20 ms | &nbsp;0.00 %] Request summary: 2 filters</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-004: <b>RI</b> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[86.14 / 95.49 ms | 46.87 %] ReadFrom summary: 3 interceptors</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-005: <b>INVOKE</b> &nbsp; &nbsp; &nbsp;[ 0.04 / 95.70 ms | &nbsp;0.02 %] Resource [org.glassfish.jersey.tests.integration.tracing.SubResource @901a4f3] method=[public org.glassfish.jersey.tests.integration.tracing.Message org.glassfish.jersey.tests.integration.tracing.SubResource.postSub(org.glassfish.jersey.tests.integration.tracing.Message)]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-006: <b>RESP-FILTER</b> [ 0.01 / 96.55 ms | &nbsp;0.00 %] Response summary: 2 filters</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-007: <b>WI</b> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[85.95 / 183.69 ms | 46.77 %] WriteTo summary: 4 interceptors</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-008: <b>FINISHED</b> &nbsp; &nbsp;[ ---- / 183.79 ms | &nbsp;---- %] Response status: 200/SUCCESSFUL|OK</span><br /><br /><h4>Accept header, MVC integration, TRACE level example</h4><br />Second example shows MVC message&nbsp;(from&nbsp;<span style="font-family: Courier New, Courier, monospace;">jersey-mvc-jsp</span> integration module) using <span style="font-family: Courier New, Courier, monospace;">examples/bookstore-webapp</span> module.<br /><br />Run test application using Jetty server:<br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">~/jersey2/examples/<b>bookstore-webapp</b>$ <b>mvn compile jetty:run</b></span><br /><br />Let's trace&nbsp;<span style="font-family: Courier New, Courier, monospace;">GET</span>&nbsp;request using "<span style="font-family: Courier New, Courier, monospace;">Accept</span>" header to activate on-demand tracing support messages (<a href="https://github.com/jersey/jersey/blob/master/examples/bookstore-webapp/src/main/java/org/glassfish/jersey/examples/bookstore/webapp/MyApplication.java#L66">MyApplication.java</a>). This is just snippet of default TRACE level messages to demonstrate MVC JSP forwarding message:<br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">$ curl -i http://localhost:9998/items/3/tracks/0 -H <b>X-Jersey-Tracing-Accept:<i>whatever</i></b></span><br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">...</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-033: WI &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.00 / 23.39 ms | &nbsp;0.02 %] [org.glassfish.jersey.server.mvc.internal.TemplateMethodInterceptor @141bcd49 #4000] BEFORE context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-034: WI &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.01 / 23.42 ms | &nbsp;0.02 %] [org.glassfish.jersey.filter.LoggingFilter @2d427def #-2147483648] BEFORE context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-035: MBW &nbsp; &nbsp; &nbsp; &nbsp; [ ---- / 23.45 ms | &nbsp;---- %] Find MBW for type=[org.glassfish.jersey.server.mvc.internal.ImplicitViewable] genericType=[org.glassfish.jersey.server.mvc.internal.ImplicitViewable] mediaType=[[javax.ws.rs.core.MediaType @7bfbfeae]] annotations=[]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-036: MBW &nbsp; &nbsp; &nbsp; &nbsp; [ ---- / 23.52 ms | &nbsp;---- %] [org.glassfish.jersey.server.mvc.internal.ViewableMessageBodyWriter @78b353d4] IS writeable</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-037: <b>MVC</b> &nbsp; &nbsp; &nbsp; &nbsp; [ ---- / 24.05 ms | &nbsp;---- %] Forwarding view to JSP page [/org/glassfish/jersey/examples/bookstore/webapp/resource/Track/index.jsp], model [org.glassfish.jersey.examples.bookstore.webapp.resource.Track @3937f594]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-038: MBW &nbsp; &nbsp; &nbsp; &nbsp; [ 1.09 / 24.63 ms | &nbsp;4.39 %] WriteTo by [org.glassfish.jersey.server.mvc.internal.ViewableMessageBodyWriter @78b353d4]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-039: WI &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.00 / 24.67 ms | &nbsp;0.01 %] [org.glassfish.jersey.filter.LoggingFilter @2d427def #-2147483648] AFTER context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-040: WI &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.00 / 24.70 ms | &nbsp;0.01 %] [org.glassfish.jersey.server.mvc.internal.TemplateMethodInterceptor @141bcd49 #4000] AFTER context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">...</span><br /><br /><h4>Logger header, VERBOSE level example</h4><br />The last example shows JDK logger name configuration and also uses &nbsp;<span style="font-family: Courier New, Courier, monospace;">tests/integration/tracing-support</span>&nbsp;module.<br /><br />Run test application using Jetty server with JDK logger config file set (JDK logging configuration from file works just on Java 7):<br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">~/jersey2/tests/integration/<b>tracing-support</b>$&nbsp;<b>mvn compile jetty:run</b></span><b style="font-family: 'Courier New', Courier, monospace; font-size: small;">&nbsp;-Djava.util.logging.config.file=src/test/resources/logging.properties</b><br /><br />Let's trace&nbsp;<span style="font-family: Courier New, Courier, monospace;">POST</span>&nbsp;request with&nbsp;<span style="font-family: Courier New, Courier, monospace;">VERBOSE</span>&nbsp;level using "<span style="font-family: Courier New, Courier, monospace;">Threshold</span>" header and customize server-side logger name (suffix "<span style="font-family: Courier New, Courier, monospace;">lkr</span>") using "<span style="font-family: Courier New, Courier, monospace;">Logger</span>" header:<br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">$ curl -i http://localhost:9998/ALL/root/sub-resource-locator/sub-resource-method -H content-type:application/x-jersey-test --data '-=#[LKR]#=-' -H <b>X-Jersey-Tracing-Threshold:VERBOSE</b> -H <b>X-Jersey-Tracing-Logger:lkr</b> -H accept:application/x-jersey-test -X POST</span><br /><br />Snippet of response Tracing headers, see "skipped" messages available just with <span style="font-family: Courier New, Courier, monospace;">VERBOSE</span> level:<br /><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-055:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.01 / 110.41 ms | &nbsp;0.00 %] [org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor @25f3027c #10] BEFORE context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-056:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[43.14 / 153.76 ms | 21.66 %] [org.glassfish.jersey.tests.integration.tracing.WriterInterceptor39 @19378d8d #39] BEFORE context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-057:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.02 / 154.15 ms | &nbsp;0.01 %] [org.glassfish.jersey.tests.integration.tracing.WriterInterceptor45 @e2e30ea #45] BEFORE context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-058:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.01 / 154.49 ms | &nbsp;0.01 %] [org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor @7a8d59eb #3000] BEFORE context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-059:&nbsp;<b>MBW</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ ---- / 154.72 ms | &nbsp;---- %] Find MBW for type=[org.glassfish.jersey.tests.integration.tracing.Message] genericType=[org.glassfish.jersey.tests.integration.tracing.Message] mediaType=[[org.glassfish.jersey.message.internal.AcceptableMediaType @77d470a6]] annotations=[@javax.ws.rs.Path(value=sub-resource-method), @javax.ws.rs.POST()]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-060:&nbsp;<b>MBW</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ ---- / 154.95 ms | &nbsp;---- %] [org.glassfish.jersey.tests.integration.tracing.MessageBodyWriterTestFormat @2b40fbd9] IS writeable</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-061:&nbsp;<b>MBW</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ ---- / 155.14 ms | &nbsp;---- %] [org.glassfish.jersey.tests.integration.tracing.MessageBodyWriterGeneric @375679be] <b>is skipped</b></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-062:&nbsp;<b>MBW</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ ---- / 155.28 ms | &nbsp;---- %] [org.glassfish.jersey.message.internal.XmlCollectionJaxbProvider$General @4e0919d8] <b>is skipped</b></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-063:&nbsp;<b>MBW</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ ---- / 155.42 ms | &nbsp;---- %] [org.glassfish.jersey.message.internal.XmlRootElementJaxbProvider$General @683ca3a4] <b>is skipped</b></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-064:&nbsp;<b>MBW</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ 0.03 / 155.58 ms | &nbsp;0.01 %] WriteTo by [org.glassfish.jersey.tests.integration.tracing.MessageBodyWriterTestFormat @2b40fbd9]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-065:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.00 / 155.77 ms | &nbsp;0.00 %] [org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor @7a8d59eb #3000] AFTER context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-066:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[42.11 / 198.10 ms | 21.15 %] [org.glassfish.jersey.tests.integration.tracing.WriterInterceptor45 @e2e30ea #45] AFTER context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-067:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.01 / 198.48 ms | &nbsp;0.01 %] [org.glassfish.jersey.tests.integration.tracing.WriterInterceptor39 @19378d8d #39] AFTER context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-068:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[ 0.00 / 198.72 ms | &nbsp;0.00 %] [org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor @25f3027c #10] AFTER context.proceed()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">X-Jersey-Tracing-069:&nbsp;<b>WI</b>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[88.53 / 198.93 ms | 44.46 %] WriteTo summary: 4 interceptors</span><br /><br />And same messages written to server-side log (customized logger name):<br /><br /><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_BEFORE</b> [org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor @25f3027c #10] BEFORE context.proceed() [ 0.01 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_BEFORE</b> [org.glassfish.jersey.tests.integration.tracing.WriterInterceptor39 @19378d8d #39] BEFORE context.proceed() [43.14 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_BEFORE</b> [org.glassfish.jersey.tests.integration.tracing.WriterInterceptor45 @e2e30ea #45] BEFORE context.proceed() [ 0.02 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_BEFORE</b> [org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor @7a8d59eb #3000] BEFORE context.proceed() [ 0.01 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>MBW_FIND</b> Find MBW for type=[org.glassfish.jersey.tests.integration.tracing.Message] genericType=[org.glassfish.jersey.tests.integration.tracing.Message] mediaType=[[org.glassfish.jersey.message.internal.AcceptableMediaType @77d470a6]] annotations=[@javax.ws.rs.Path(value=sub-resource-method), @javax.ws.rs.POST()] [ ---- ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>MBW_SELECTED</b> [org.glassfish.jersey.tests.integration.tracing.MessageBodyWriterTestFormat @2b40fbd9] IS writeable [ ---- ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINEST</b> &nbsp;[org.glassfish.jersey.tracing.<b>lkr</b>] <b>MBW_SKIPPED</b> [org.glassfish.jersey.tests.integration.tracing.MessageBodyWriterGeneric @375679be] is skipped [ ---- ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINEST</b> &nbsp;[org.glassfish.jersey.tracing.<b>lkr</b>] <b>MBW_SKIPPED</b> [org.glassfish.jersey.message.internal.XmlCollectionJaxbProvider$General @4e0919d8] is skipped [ ---- ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINEST</b> &nbsp;[org.glassfish.jersey.tracing.<b>lkr</b>] <b>MBW_SKIPPED</b> [org.glassfish.jersey.message.internal.XmlRootElementJaxbProvider$General @683ca3a4] is skipped [ ---- ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>MBW_WRITE_TO</b> WriteTo by [org.glassfish.jersey.tests.integration.tracing.MessageBodyWriterTestFormat @2b40fbd9] [ 0.03 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_AFTER</b> [org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor @7a8d59eb #3000] AFTER context.proceed() [ 0.00 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_AFTER</b> [org.glassfish.jersey.tests.integration.tracing.WriterInterceptor45 @e2e30ea #45] AFTER context.proceed() [42.11 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_AFTER</b> [org.glassfish.jersey.tests.integration.tracing.WriterInterceptor39 @19378d8d #39] AFTER context.proceed() [ 0.01 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINER</b> &nbsp; [org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_AFTER</b> [org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor @25f3027c #10] AFTER context.proceed() [ 0.00 ms]</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><b>FINE</b> &nbsp; &nbsp;[org.glassfish.jersey.tracing.<b>lkr</b>] <b>WI_SUMMARY</b> WriteTo summary: 4 interceptors [88.53 ms]</span><br /><br />You can see some differences. There is just <span style="font-family: Courier New, Courier, monospace;">duration</span> value (if applicable), no&nbsp;<span style="font-family: Courier New, Courier, monospace;">time_from_start</span>&nbsp;or&nbsp;<span style="font-family: Courier New, Courier, monospace;">total_req_ratio</span>.<br /><br />Message tracing level is transformed to JDK logging level:<br /><br /><ul><li><span style="font-family: Courier New, Courier, monospace;">SUMMARY -&gt; FINE</span></li><li><span style="font-family: Courier New, Courier, monospace;">TRACE &nbsp; -&gt; FINER</span></li><li><span style="font-family: Courier New, Courier, monospace;">VERBOSE -&gt; FINEST</span></li></ul><br />Each message type has unique ID transformed to message category while formatting HTTP response headers:<br /><ul><li><span style="font-family: Courier New, Courier, monospace;">START&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; START</span></li><li><span style="font-family: Courier New, Courier, monospace;">START_HEADERS&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; START</span></li><li><span style="font-family: Courier New, Courier, monospace;">PRE_MATCH&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; PRE-MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">PRE_MATCH_SUMMARY &nbsp; &nbsp; &nbsp; -&gt; PRE-MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_PATH_FIND &nbsp; &nbsp; &nbsp; &nbsp; -&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_PATH_NOT_MATCHED &nbsp;-&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_PATH_SELECTED &nbsp; &nbsp; -&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_PATH_SKIPPED &nbsp; &nbsp; &nbsp;-&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_LOCATOR &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;-&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_RESOURCE_METHOD&nbsp;&nbsp; -&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_RUNTIME_RESOURCE &nbsp;-&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_RESOURCE&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">MATCH_SUMMARY&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; MATCH</span></li><li><span style="font-family: Courier New, Courier, monospace;">REQUEST_FILTER&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; REQ-FILTER</span></li><li><span style="font-family: Courier New, Courier, monospace;">REQUEST_FILTER_SUMMARY &nbsp;-&gt; REQ-FILTER</span></li><li><span style="font-family: Courier New, Courier, monospace;">METHOD_INVOKE&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; INVOKE</span></li><li><span style="font-family: Courier New, Courier, monospace;">DISPATCH_RESPONSE&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; INVOKE</span></li><li><span style="font-family: Courier New, Courier, monospace;">RESPONSE_FILTER &nbsp; &nbsp; &nbsp; &nbsp; -&gt; RESP-FILTER</span></li><li><span style="font-family: Courier New, Courier, monospace;">RESPONSE_FILTER_SUMMARY -&gt; RESP-FILTER</span></li><li><span style="font-family: Courier New, Courier, monospace;">FINISHED&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;-&gt; FINISHED</span></li><li><span style="font-family: Courier New, Courier, monospace;">EXCEPTION_MAPPING&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; EXCEPTION</span></li><li><span style="font-family: Courier New, Courier, monospace;">RI_BEFORE&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; RI</span></li><li><span style="font-family: Courier New, Courier, monospace;">RI_AFTER&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;-&gt; RI</span></li><li><span style="font-family: Courier New, Courier, monospace;">RI_SUMMARY&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; RI</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBR_FIND&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; MBR</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBR_NOT_READABLE&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; MBR</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBR_SELECTED&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; MBR</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBR_SKIPPED&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;-&gt; MBR</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBR_READ_FROM&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; MBR</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBW_FIND&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; MBW</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBW_NOT_WRITEABLE&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; MBW</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBW_SELECTED&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; MBW</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBW_SKIPPED&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;-&gt; MBW</span></li><li><span style="font-family: Courier New, Courier, monospace;">MBW_WRITE_TO&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;-&gt; MBW</span></li><li><span style="font-family: Courier New, Courier, monospace;">WI_BEFORE&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -&gt; WI</span></li><li><span style="font-family: Courier New, Courier, monospace;">WI_AFTER&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-&gt; WI</span></li><li><span style="font-family: Courier New, Courier, monospace;">WI_SUMMARY&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;-&gt; WI</span></li><li><span style="font-family: Courier New, Courier, monospace;">JSP_FORWARD&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;-&gt; MVC</span></li></ul><div><span style="font-family: Courier New, Courier, monospace;"><br /></span></div><h2>Feedback</h2>This is extended version of user guide capture&nbsp;<a href="https://jersey.java.net/documentation/latest/monitoring_tracing.html#tracing">Tracing Support</a>. I am looking forward to your comments bellow the post. You can also use Jersey <a href="https://jersey.java.net/mailing.html">mailing lists</a>. Don't hesitate to report any bugs, feature, and/or improvement requests in Jersey <a href="http://java.net/jira/browse/JERSEY">JIRA</a> issue tracker.<br /><br />Thanks,<br />-lk<br /><br />