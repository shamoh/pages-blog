---
layout: post
title: JAX-RS Kryo Message Body providers are placed to Jersey incubator
date: '2015-04-24T10:43:00.000+02:00'
author: Libor Kramoliš
tags:
- jaxrs
- jersey
- kryo
modified_time: '2015-04-24T10:43:07.168+02:00'
blogger_id: tag:blogger.com,1999:blog-2759548145050416517.post-6252351229834189798
blogger_orig_url: http://yatel.kramolis.cz/2015/04/jaxrs-kryo-mb-provider-jersey-incubator.html
---

I have good news, mine JAX-RS Kryo support has been moved to <a href="https://github.com/jersey/jersey/tree/master/incubator/kryo">Jersey incubator</a>.<br /><div><br /></div><div>You can just add dependency on the module and your application can produce and consume&nbsp;<span style="font-family: Courier New, Courier, monospace;">application/x-kryo</span> entities:</div><div><br /></div><!-- HTML generated using hilite.me --><br /><div style="background: #f0f0f0; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #062873; font-weight: bold;">&lt;dependency&gt;</span><br />    <span style="color: #062873; font-weight: bold;">&lt;groupId&gt;</span>org.glassfish.jersey.media<span style="color: #062873; font-weight: bold;">&lt;/groupId&gt;</span><br />    <span style="color: #062873; font-weight: bold;">&lt;artifactId&gt;</span>jersey-media-kryo<span style="color: #062873; font-weight: bold;">&lt;/artifactId&gt;</span><br />    <span style="color: #062873; font-weight: bold;">&lt;version&gt;</span>${jersey.version}<span style="color: #062873; font-weight: bold;">&lt;/version&gt;</span><br /><span style="color: #062873; font-weight: bold;">&lt;/dependency&gt;</span><br /></pre></div><div><br />Original <a href="https://github.com/shamoh/jersey-kryo">GitHub repository</a>&nbsp;has been updated to use Jersey module. And as a bonus I've added two ways how to try it.<br /><br />This is true since Jersey 2.18. The version was not released yet in time of writing this blog post. So you need to use <span style="font-family: Courier New, Courier, monospace;">2.18-SNAPSHOT</span> version and add Maven snapshot repository to your project:<br /><br /></div><!-- HTML generated using hilite.me --><br /><div style="background: #f0f0f0; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #062873; font-weight: bold;">&lt;repositories&gt;</span><br />    <span style="color: #062873; font-weight: bold;">&lt;repository&gt;</span><br />        <span style="color: #062873; font-weight: bold;">&lt;id&gt;</span>java.net.snapshot<span style="color: #062873; font-weight: bold;">&lt;/id&gt;</span><br />        <span style="color: #062873; font-weight: bold;">&lt;url&gt;</span>https://maven.java.net/content/repositories/snapshots/<span style="color: #062873; font-weight: bold;">&lt;/url&gt;</span><br />    <span style="color: #062873; font-weight: bold;">&lt;/repository&gt;</span><br /><span style="color: #062873; font-weight: bold;">&lt;/repositories&gt;</span><br /></pre></div><br /><h2>Grizzly it</h2>Maven packaging of this demo application is <code><span style="font-family: Courier New, Courier, monospace;">war</span></code>. But it is possible to run the application using Grizzly HTTP container:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #f0f0f0; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">mvn <span style="color: #007020;">exec</span>:java<br /></pre></div><br />You can enable <code>FINEST</code> logging using <code>logging.properties</code>:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #f0f0f0; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">mvn <span style="color: #007020;">exec</span>:java -Djava.util.logging.config.file<span style="color: #666666;">=</span>target/test-classes/logging.properties<br /></pre></div><br /><h2>Jetty it</h2>Or you can run it as common webapp using Jetty container:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #f0f0f0; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">mvn jetty:run-war<br /></pre></div><br />Again, you can enable <span style="font-family: Courier New, Courier, monospace;">FINEST</span> logging using <span style="font-family: Courier New, Courier, monospace;">logging.properties</span>:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #f0f0f0; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">mvn jetty:run-war -Djava.util.logging.config.file<span style="color: #666666;">=</span>target/test-classes/logging.properties<br /></pre></div><br /><h2>Check it</h2>GET method is available at URL <a href="http://localhost:8080/">http://localhost:8080/</a>, check it using <code>curl</code>:<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #f0f0f0; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">curl -v http://localhost:8080/<br /></pre></div><br />Response should look like:<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #f0f0f0; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">&gt; GET / HTTP/1.1<br />&gt; User-Agent: curl/7.40.0<br />&gt; Host: localhost:8080<br />&gt; Accept: */*<br />&gt;<br />&lt; HTTP/1.1 200 OK<br />&lt; Content-Length: 20<br />&lt; Content-Type: application/x-kryo<br />&lt; Server: Jetty<span style="color: #666666;">(</span>8.1.16.v20140903<span style="color: #666666;">)</span><br />&lt;<br />Salzbur�*Wolfgan�<br /></pre></div><br /><h2>Origin</h2>The Jersey Kryo support started as a "friday project". Evolution of the Kryo support shows list of previous blog posts:<br /><ol><li><a href="http://yatel.kramolis.cz/2015/03/jax-rs-message-body-writer-using-kryo.html">JAX-RS Kryo support introduced</a></li><li><a href="http://yatel.kramolis.cz/2015/04/jax-rs-kryo-message-body-writer-reader.html">Performance report of JAX-RS Kryo support</a></li></ol>